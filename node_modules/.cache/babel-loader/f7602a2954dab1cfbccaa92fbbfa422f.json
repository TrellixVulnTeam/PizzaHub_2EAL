{"ast":null,"code":"const initialState = {\n  items: {},\n  totalPrice: 0,\n  totalCount: 0\n};\n\nconst cart = (state = initialState, action) => {\n  const getTotalPrice = arr => arr.reduce((sum, obj) => obj.price + sum, 0);\n\n  const _get = (obj, path) => {\n    const [firstKey, ...keys] = path.split('.');\n    return keys.reduce((val, key) => {\n      return val[key];\n    }, obj[firstKey]);\n  };\n\n  const totalSum = (obj, path) => {\n    return Object.values(obj).reduce((sum, obj) => {\n      const value = _get(obj, path);\n\n      return sum + value;\n    }, 0);\n  };\n\n  switch (action.type) {\n    case 'ADD_PIZZA_CART':\n      {\n        const currentPizzaItems = !state.items[action.payload.id] ? [action.payload] : [...state.items[action.payload.id].items, action.payload];\n        const newItems = { ...state.items,\n          [action.payload.id]: {\n            items: currentPizzaItems,\n            totalPrice: getTotalPrice(currentPizzaItems)\n          }\n        };\n        const totalCount = totalSum(newItems, 'items.length');\n        const totalPrice = totalSum(newItems, 'totalPrice');\n        return { ...state,\n          items: newItems,\n          totalCount,\n          totalPrice\n        };\n      }\n\n    case 'CLEAR_CARD':\n      return {\n        items: {},\n        totalPrice: 0,\n        totalCount: 0\n      };\n\n    case 'REMOVE_CART_ITEM':\n      {\n        const newItems = { ...state.items\n        };\n        const currentTotalPrice = newItems[action.payload].totalPrice;\n        const currentTotalCount = newItems[action.payload].items.length;\n        delete newItems[action.payload];\n        return { ...state,\n          items: newItems,\n          totalPrice: state.totalPrice - currentTotalPrice,\n          totalCount: state.totalCount - currentTotalCount\n        };\n      }\n\n    case 'PLUS_CART_ITEM':\n      {\n        const newObjItems = [...state.items[action.payload].items, state.items[action.payload].items[0]];\n        const newItems = { ...state.items,\n          [action.payload]: {\n            items: newObjItems,\n            totalPrice: getTotalPrice(newObjItems)\n          }\n        };\n        const totalCount = totalSum(newItems, 'items.length');\n        const totalPrice = totalSum(newItems, 'totalPrice');\n        return { ...state,\n          items: newItems,\n          totalPrice,\n          totalCount\n        };\n      }\n\n    case 'MINUS_CART_ITEM':\n      {\n        const oldItems = state.items[action.payload].items;\n        const newObjItems = oldItems.length > 1 ? state.items[action.payload].items.slice(1) : oldItems;\n        const newItems = { ...state.items,\n          [action.payload]: {\n            items: newObjItems,\n            totalPrice: getTotalPrice(newObjItems)\n          }\n        };\n        const totalCount = totalSum(newItems, 'items.length');\n        const totalPrice = totalSum(newItems, 'totalPrice');\n        return { ...state,\n          items: newItems,\n          totalPrice,\n          totalCount\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default cart;","map":{"version":3,"sources":["/Users/mac/Desktop/PizzaHub/src/redux/reducers/cart.js"],"names":["initialState","items","totalPrice","totalCount","cart","state","action","getTotalPrice","arr","reduce","sum","obj","price","_get","path","firstKey","keys","split","val","key","totalSum","Object","values","value","type","currentPizzaItems","payload","id","newItems","currentTotalPrice","currentTotalCount","length","newObjItems","oldItems","slice"],"mappings":"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","sourcesContent":["const initialState = {\n  items: {},\n  totalPrice: 0,\n  totalCount: 0,\n};\n\nconst cart = (state = initialState, action) => {\n  const getTotalPrice = (arr) => arr.reduce((sum, obj) => obj.price + sum, 0);\n\n  const _get = (obj, path) => {\n    const [firstKey, ...keys] = path.split('.');\n    return keys.reduce((val, key) => {\n      return val[key];\n    }, obj[firstKey]);\n  };\n\n  const totalSum = (obj, path) => {\n    return Object.values(obj).reduce((sum, obj) => {\n      const value = _get(obj, path);\n      return sum + value;\n    }, 0);\n  };\n\n  switch (action.type) {\n    case 'ADD_PIZZA_CART': {\n      const currentPizzaItems = !state.items[action.payload.id]\n        ? [action.payload]\n        : [...state.items[action.payload.id].items, action.payload];\n\n      const newItems = {\n        ...state.items,\n        [action.payload.id]: {\n          items: currentPizzaItems,\n          totalPrice: getTotalPrice(currentPizzaItems),\n        },\n      };\n      const totalCount = totalSum(newItems, 'items.length');\n      const totalPrice = totalSum(newItems, 'totalPrice');\n\n      return {\n        ...state,\n        items: newItems,\n        totalCount,\n        totalPrice,\n      };\n    }\n\n    case 'CLEAR_CARD':\n      return {\n        items: {},\n        totalPrice: 0,\n        totalCount: 0,\n      };\n    case 'REMOVE_CART_ITEM': {\n      const newItems = {\n        ...state.items,\n      };\n      const currentTotalPrice = newItems[action.payload].totalPrice;\n      const currentTotalCount = newItems[action.payload].items.length;\n      delete newItems[action.payload];\n      return {\n        ...state,\n        items: newItems,\n        totalPrice: state.totalPrice - currentTotalPrice,\n        totalCount: state.totalCount - currentTotalCount,\n      };\n    }\n\n    case 'PLUS_CART_ITEM': {\n      const newObjItems = [\n        ...state.items[action.payload].items,\n        state.items[action.payload].items[0],\n      ];\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n      const totalCount = totalSum(newItems, 'items.length');\n      const totalPrice = totalSum(newItems, 'totalPrice');\n      return {\n        ...state,\n        items: newItems,\n        totalPrice,\n        totalCount,\n      };\n    }\n\n    case 'MINUS_CART_ITEM': {\n      const oldItems = state.items[action.payload].items;\n      const newObjItems =\n        oldItems.length > 1 ? state.items[action.payload].items.slice(1) : oldItems;\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n      const totalCount = totalSum(newItems, 'items.length');\n      const totalPrice = totalSum(newItems, 'totalPrice');\n      return {\n        ...state,\n        items: newItems,\n        totalPrice,\n        totalCount,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nexport default cart;\n"]},"metadata":{},"sourceType":"module"}