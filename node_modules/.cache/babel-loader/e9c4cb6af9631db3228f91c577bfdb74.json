{"ast":null,"code":"import _defineProperty from\"/Users/mac/Desktop/PizzaHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/Desktop/PizzaHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/mac/Desktop/PizzaHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _toArray from\"/Users/mac/Desktop/PizzaHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray\";var initialState={items:{},totalPrice:0,totalCount:0};var cart=function cart(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var getTotalPrice=function getTotalPrice(arr){return arr.reduce(function(sum,obj){return obj.price+sum;},0);};var _get=function _get(obj,path){var _path$split=path.split('.'),_path$split2=_toArray(_path$split),firstKey=_path$split2[0],keys=_path$split2.slice(1);return keys.reduce(function(val,key){return val[key];},obj[firstKey]);};var totalSum=function totalSum(obj,path){return Object.values(obj).reduce(function(sum,obj){var value=_get(obj,path);return sum+value;},0);};switch(action.type){case'ADD_PIZZA_CART':{var currentPizzaItems=!state.items[action.payload.id]?[action.payload]:[].concat(_toConsumableArray(state.items[action.payload.id].items),[action.payload]);var newItems=_objectSpread(_objectSpread({},state.items),{},_defineProperty({},action.payload.id,{items:currentPizzaItems,totalPrice:getTotalPrice(currentPizzaItems)}));var totalCount=totalSum(newItems,'items.length');var totalPrice=totalSum(newItems,'totalPrice');return _objectSpread(_objectSpread({},state),{},{items:newItems,totalCount:totalCount,totalPrice:totalPrice});}case'CLEAR_CARD':return{items:{},totalPrice:0,totalCount:0};case'REMOVE_CART_ITEM':{var _newItems=_objectSpread({},state.items);var currentTotalPrice=_newItems[action.payload].totalPrice;var currentTotalCount=_newItems[action.payload].items.length;delete _newItems[action.payload];return _objectSpread(_objectSpread({},state),{},{items:_newItems,totalPrice:state.totalPrice-currentTotalPrice,totalCount:state.totalCount-currentTotalCount});}case'PLUS_CART_ITEM':{var newObjItems=[].concat(_toConsumableArray(state.items[action.payload].items),[state.items[action.payload].items[0]]);var _newItems2=_objectSpread(_objectSpread({},state.items),{},_defineProperty({},action.payload,{items:newObjItems,totalPrice:getTotalPrice(newObjItems)}));var _totalCount=totalSum(_newItems2,'items.length');var _totalPrice=totalSum(_newItems2,'totalPrice');return _objectSpread(_objectSpread({},state),{},{items:_newItems2,totalPrice:_totalPrice,totalCount:_totalCount});}case'MINUS_CART_ITEM':{var oldItems=state.items[action.payload].items;var _newObjItems=oldItems.length>1?state.items[action.payload].items.slice(1):oldItems;var _newItems3=_objectSpread(_objectSpread({},state.items),{},_defineProperty({},action.payload,{items:_newObjItems,totalPrice:getTotalPrice(_newObjItems)}));var _totalCount2=totalSum(_newItems3,'items.length');var _totalPrice2=totalSum(_newItems3,'totalPrice');return _objectSpread(_objectSpread({},state),{},{items:_newItems3,totalPrice:_totalPrice2,totalCount:_totalCount2});}default:return state;}};export default cart;","map":{"version":3,"sources":["/Users/mac/Desktop/PizzaHub/src/redux/reducers/cart.js"],"names":["initialState","items","totalPrice","totalCount","cart","state","action","getTotalPrice","arr","reduce","sum","obj","price","_get","path","split","firstKey","keys","val","key","totalSum","Object","values","value","type","currentPizzaItems","payload","id","newItems","currentTotalPrice","currentTotalCount","length","newObjItems","oldItems","slice"],"mappings":"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","sourcesContent":["const initialState = {\n  items: {},\n  totalPrice: 0,\n  totalCount: 0,\n};\n\nconst cart = (state = initialState, action) => {\n  const getTotalPrice = (arr) => arr.reduce((sum, obj) => obj.price + sum, 0);\n\n  const _get = (obj, path) => {\n    const [firstKey, ...keys] = path.split('.');\n    return keys.reduce((val, key) => {\n      return val[key];\n    }, obj[firstKey]);\n  };\n\n  const totalSum = (obj, path) => {\n    return Object.values(obj).reduce((sum, obj) => {\n      const value = _get(obj, path);\n      return sum + value;\n    }, 0);\n  };\n\n  switch (action.type) {\n    case 'ADD_PIZZA_CART': {\n      const currentPizzaItems = !state.items[action.payload.id]\n        ? [action.payload]\n        : [...state.items[action.payload.id].items, action.payload];\n\n      const newItems = {\n        ...state.items,\n        [action.payload.id]: {\n          items: currentPizzaItems,\n          totalPrice: getTotalPrice(currentPizzaItems),\n        },\n      };\n      const totalCount = totalSum(newItems, 'items.length');\n      const totalPrice = totalSum(newItems, 'totalPrice');\n\n      return {\n        ...state,\n        items: newItems,\n        totalCount,\n        totalPrice,\n      };\n    }\n\n    case 'CLEAR_CARD':\n      return {\n        items: {},\n        totalPrice: 0,\n        totalCount: 0,\n      };\n    case 'REMOVE_CART_ITEM': {\n      const newItems = {\n        ...state.items,\n      };\n      const currentTotalPrice = newItems[action.payload].totalPrice;\n      const currentTotalCount = newItems[action.payload].items.length;\n      delete newItems[action.payload];\n      return {\n        ...state,\n        items: newItems,\n        totalPrice: state.totalPrice - currentTotalPrice,\n        totalCount: state.totalCount - currentTotalCount,\n      };\n    }\n\n    case 'PLUS_CART_ITEM': {\n      const newObjItems = [\n        ...state.items[action.payload].items,\n        state.items[action.payload].items[0],\n      ];\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n      const totalCount = totalSum(newItems, 'items.length');\n      const totalPrice = totalSum(newItems, 'totalPrice');\n      return {\n        ...state,\n        items: newItems,\n        totalPrice,\n        totalCount,\n      };\n    }\n\n    case 'MINUS_CART_ITEM': {\n      const oldItems = state.items[action.payload].items;\n      const newObjItems =\n        oldItems.length > 1 ? state.items[action.payload].items.slice(1) : oldItems;\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n      const totalCount = totalSum(newItems, 'items.length');\n      const totalPrice = totalSum(newItems, 'totalPrice');\n      return {\n        ...state,\n        items: newItems,\n        totalPrice,\n        totalCount,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nexport default cart;\n"]},"metadata":{},"sourceType":"module"}